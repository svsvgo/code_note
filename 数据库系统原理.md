https://www.bilibili.com/video/BV1ra4y1t7xY?spm_id_from=333.337.search-card.all.click&vd_source=6fdd87bf6bc30cd934c9ab0092894b53



# 第一章

### 数据库：DB 是长期储存在计算机内

数据库的特征

	- 数据按照一定的数据模型组织、描述和存储
	- 可为各种用户共享
	- 数据独立性较高

### 数据库管理系统：DBMS

​	DBMS的主要功能

数据定义

数据操纵

数据库的运行管理

数据库的建立和维护功能



### 数据库系统：DBS

数据库系统的构成

- 数据库
- 数据库管理系统
- 应用系统
- 相关人员（数据库管理员、应用系统开发人员、用户）



### 数据库管理员：DBA



## 数据库系统的体系结构

在用户（或应用程序）到数据库之间，DB的数据结构有三个层次：外部模型。逻辑模型和内部模型。

 外模式/逻辑模式映象

逻辑模式/内模式映象



### 逻辑模式

数据库中全体数据的逻辑结构和特征的描述

是综合了所有用户的需要和公共数据视图

一个数据库只有一个逻辑模式

### 外模式（也称子模式或用户模式）

数据库用户使用的局部数据的逻辑结构和特征的描述

数据库用户的数据视图，是与某一应用有关的数据的逻辑表示

外模式的地位：介于模式与应用之间

逻辑模式与外模式的关系：一对多

外模式通常是逻辑模式的子集

外模式与应用的关系：一对多

### 内模式

是数据物理结构和存储方式的描述



## 两级映象三级模式



## 逻辑独立性

指用户的应用程序与数据库的逻辑结构是相互独立的，数据的逻辑结构改变了，应用程序也可以不变。

外模式/模式映象保证了数据的逻辑独立性

### 物理独立性



----

数据模型的分类

1. 关系模型
2. 半结构化的数据模型

- 网状模型
- 层次模型
- XML
- JSON

XML和JSON是两种经常在网络使用的数据表示格式

这些区别在于 数据结构 不同



## 关系模型

### 1.关系数据结构

单一的数据结构---关系

数据的逻辑结构-----二维表

1.域 是一组具有相同数据类型的值的集合 一列是一个域

2.笛卡尔积 给定一组域 D1，D2，D.....，Dn

### 关系的表示

关系也是一个二维表

---表的每行对应一个元组

---表的每列对应一个域

不同的列可出自同一个域

其中的每一列称为一个属性，不同的属性要给予不同的属性名

### 关系操作

查询、插入、删除、修改

关系数据库语言的种类

--关系代数

--关系演算

具有上两者双重特点的语言，如SQL；

关系数据语言的特点

-- 是一种高度非过程化的语言

--能够嵌入高级语言中使用

### 完整性约束

----实体完整性：必须定义主键

----参照完整性：必须满足外键的规格

----用户自定义完整性：根据需求自定义一些完整性规则



---

## 关系数据语言

### 关系代数，关系演算等



### sql





### 关系代数

- 并、差、交
- 投影 选择
- 笛卡尔积、连接
- 重命名

关系代数 是一种抽象的数据查询语言

用对关系的运算来表达查询



### 关系运算符分类

![](https://cdn.svsvg.top/20220907000918.png)



#### 投影

π

### 重命名

p



## SQL

SQL数据定义功能

#### 定义表

- 创建表
- 删除表
- 修改表定义

![](https://cdn.svsvg.top/20220907233623.png)

创建 - CREATE TABLE

删除 - DROP TABLE

修改 - ALTER TABLE



![](https://cdn.svsvg.top/20220907235258.png)



![](https://cdn.svsvg.top/20220907235351.png)



![](https://cdn.svsvg.top/20220907235738.png)



![](https://cdn.svsvg.top/20220907235903.png)





### 修改基本表

ALTER TABLE <表名>

[ADD xxxx <类型>]



## DDL

### SELECT

select A1,A2....

FROM R1,R2.....

where condition

#### 单表查询

查询仅涉及一个表，是一种最简单的查询操作

1）选择表中的若干列   ——SELECT子句

2）选择表中的若干元组 ——WHERE子句

3）对查询结果排序		——ORDER BY子句

4）使用集函数				——5个集函数

5）对查询结果分组  		——GROUP BY 子句

6）对分组之后结果进行筛选 ——HAVING 子句



#### 1）选择表中的若干列

SELECT <目标列表达式>[<别名>]  指定要显示的属性列

FROM <表名>[<别名>]  指定查询对象（基本表和视图）



#### 2）选择表中的若干元组

消除取值重复的行

在SELECT子句中使用DISTINCT短语

DISTINCT 短语的作用范围是所有目标列

查询满足条件的元组

选择运算

通过WHERE Condition 子句实现

![](https://cdn.svsvg.top/20220908234335.png)



确定范围

BETWEEN ... AND ...;包含条件... ...

确定集合

IN() NOT IN();

通配符

LIKE

ESCAPE短语

当用户要查询的字符串本身就含有% 或 _ 时，

要使用ESCAPE"<换码字符>"短语对通配符进行转义



%（百分号）代表任意长度（长度可以为0）的字符串

列 a%b 表示以a开头，以b结尾的任意长度的字符串，如acb，ab

_(下横线)代表任意单个字符



涉及空值的查询

使用谓词IS NULL 或 IS NOT NULL

不能用“= NULL”代替

多重条件查询

用逻辑运算符AND或OR来联结多个查询条件

AND的优先级高于OR

可以用括号改变优先级



#### 使用集函数

5类主要集函数（不统计空值NULL）

 - 统计个数
   - CUONT(<列名>)
 - 计算列总和
   - SUM(<列名>)
 - 计算列平均值
   - AVG(<列名>)
 - 求列最大值
   - MAX(<列名>)
 - 求列最小值
   - MIN(<列名>)

#### 对查询结果分组

使用GROUP BY子句分组

- 分组方法：按指定的一列或多列值分组，值相等的为一组
- 使用GROUP BY子句后，SELECT子句的列名列表只能出现组属性和集函数
- GROUP BY子句的作用对象是查询的中间结果表

使用HAVING短语筛选最终输出结果，

- 只有满足HAVING短语指定条件的组才输出

HAVING短语与WHERE子句的区别：作用对象不同



### 连接查询

同时涉及多个表的查询称为连接查询

用来连接两个表的条件称为连接条件或连接谓词

2）等值连接

 SELECT Student.*,SC.\* FROM Student,SC

WHERE Student.Sno = SC.Sno

3）自身连接

一个表与其自己进行连接，

表示方法

- 需要给表起别名以示区别
- 由于所有属性名都是同名属性，因此必须使用别名前缀



